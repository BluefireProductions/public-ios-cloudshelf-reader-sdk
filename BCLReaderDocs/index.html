<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bluefire&nbsp;Cloudshelf&nbsp;SDK&nbsp;Reader&nbsp;Framework: The Reader Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bluefire&nbsp;Cloudshelf&nbsp;SDK&nbsp;Reader&nbsp;Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Reader Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>The reader framework allows an application to host a view for displaying and interacting with an EPUB document.</p>
<p>Simply create a <a class="el" href="interface_b_c_l_reader_view.html" title="A BCLReaderView object is a view that renders a book and provides built in gesture handling for page ...">BCLReaderView</a> object, providing the path of a book, and add the view to your view hierarchy. The reader view takes care of handling left and right swipe gestures, as well as taps in the margins, for turning pages.</p>
<p>The framework is optimized for Swift but works equally well when hosted in an Objective-C application. The sample apps demonstrate a Swift based integration.</p>
<h2>The Sample Apps</h2>
<p>The reader framework comes with two sample apps.</p>
<ul>
<li><b>SampleAppBasic</b> - This is the best place to get started. It illustrates a minimal application that displays a list of books and a reader view. There is very little code required to get a minimal app up-and-running.</li>
<li><b>SampleAppAdvanced</b> - This app builds on the basic sample, and demonstrates more of the functionality of the reader framework. It also includes a simple implementation of some common features that a reading app might include, such as a slider, bookmarks, settings, and a table of contents.</li>
</ul>
<h3>Building the Sample Apps</h3>
<p>Building the sample apps requires a few manual configuration steps.</p>
<ol type="1">
<li>Open one of the sample app projects in Xcode.</li>
<li>In the tree on the left, click the root node (SampleAppBasic or SampleAppAdvanced).</li>
<li>In the content panel on the right, select the target.</li>
<li>Select the General tab.</li>
<li>Scroll to the "Embedded Binaries" section and click the + plus button.</li>
<li>Click "Add Other..."</li>
<li>Open <code>BCLReader.framework</code>, which is found in the root folder of the Cloudshelf SDK.</li>
<li>When prompted with options, make sure "Copy items if needed" is checked, and select "Create
    groups."</li>
<li>Select the Build Phases tab.</li>
<li>Drag "Remove Unused Architectures from the Bluefire Cloudshelf SDK Frameworks" to the bottom, so that it comes after "Embed Frameworks."</li>
<li>If building for device, select the General tab and choose a team in the "Signing" section.</li>
</ol>
<p>The important point within these steps is that <code>BCLReader.framework</code> must be embedded, rather than just linked.</p>
<h2>Adding BCLReader.framework to Your App</h2>
<p>The process for adding <code>BCLReader.framework</code> to your own app is just like the process for the sample apps. But there is one additional step you will need to take in order to get your app ready for submission to the App Store.</p>
<h3>Add a Post Build Script</h3>
<p><code>BCLReader.framework</code> is a "fat binary," which means it contains architectures for both simulator and device. When submitting to the App Store, <b>Apple will not accept apps that have "fat" embedded frameworks</b>. But it is convenient to have a single <code>BCLReader.framework</code> binary during development, rather than managing a separate framework for device and for simulator.</p>
<p>To handle this, simply add a "run script" to your project. The sample apps already have this script, which you can copy into your project verbatim. In the sample app projects, go to the Build Phases section, and copy the script found in "Remove Unused Architectures from the Bluefire Cloudshelf SDK
Frameworks." (To add a run script, in Build Phases, click the + plus button near the top of the screen and select "New Run Script Phase.") It's important to place this script <em>after</em> the "Embed
Frameworks" section of Build Phases, because the script operates on the embedded framework. The script simply removes the extra architectures from <code>BCLReader.framework</code> as it exists within your app. It does not affect the main copy of <code>BCLReader.framework</code>.</p>
<h3>Initialize the Framework</h3>
<p>Within your app, the first call you must make is to initialize the reader framework. To do this, you'll need an API key provided by Bluefire.</p>
<p>The call to <a class="el" href="interface_b_c_l_reader_initializer.html" title="This class must be called to initialize the reader framework prior to other API calls. ">BCLReaderInitializer</a> can be made in <code>UIApplication didFinishLaunchingWithOptions</code>, although anywhere is fine as long as it's the first reader framework API call made.</p>
<div class="fragment"><div class="line">// Example call to initialize</div><div class="line">BCLReaderInitializer.initialize(withApiKey: &quot;47797704e2caac0098f1dc3aefc1bf2f1b1b5a82&quot;)</div></div><!-- fragment --><h2>Use Case: Open a Book to a Percent Based Position</h2>
<p>The <a class="el" href="interface_b_c_l_reader_view.html" title="A BCLReaderView object is a view that renders a book and provides built in gesture handling for page ...">BCLReaderView</a> initializer has an optional parameter to open a book to a specific location. This is the preferred and fastest way to open a book to a predefined location.</p>
<p>Another way to open a book would be to consider the position as a percentage of the total number of pages within the book. This requires knowing the total number of pages, which is calculated asynchronously and is communicated to the caller via the reader view delegate method, <code>readerView:pageListInitializationDidMakeProgress</code>.</p>
<p>The following is an example implementation of the delegate method that opens the book to a position based on the number of pages. This code can be copied directly into <code>ReaderController.swift</code> within <b>SampleAppBasic</b>.</p>
<div class="fragment"><div class="line">func readerView(_ readerView: BCLReaderView, pageListInitializationDidMakeProgress progress: Double) {</div><div class="line">    let positionToOpen = 0.5 // The position within the book (between 0.0 and 1.0).</div><div class="line">    let items = readerView.pageList.items</div><div class="line">    guard progress == 1.0, !items.isEmpty else { return }</div><div class="line">    let index = Int(round(positionToOpen * Double(items.count - 1)))</div><div class="line">    readerView.go(to: items[index].location, isHighlighted: false, completion: nil)</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
</body>
</html>
